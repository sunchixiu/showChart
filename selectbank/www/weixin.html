<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=1080, target-densityDpi=device-dpi, user-scalable=no"/>
    <title>商品列表页</title>
    <link rel="stylesheet" href="css/bank.css" />
    <link rel="stylesheet" href="css/index.css" />
    <link rel="stylesheet" href="css/mobilebone.css" />
    <link rel="stylesheet" href="css/swiper.min.css" />
    <link rel="stylesheet" href="css/mepickout.css" />
    <script src="js/all.js"></script>
    <script src="js/mobilebone.js"></script>
    <script src="js/pickout.js"></script>
</head>
<body>
<div class="page out" id="homePage">
    <div class="tab_fixed" style="display: block;">
        <div class="city">
            <label>中国银行</label>
            <label class="right ftz30"><a href="#&changebank">切换银行</a></label>
        </div>
        <div class="tab">
            <div class="left tab_icon_out tab1">
                <img class="tab_icon" src="img/tab1.png"/>
                <div class="tab_text">商品列表</div>
            </div>
            <div class="left tab_icon_out tab2">
                <img class="tab_icon" src="img/tab2.png"/>
                <div class="tab_text">兑换列表</div>
            </div>
            <div class="left tab_icon_out tab3">
                <img class="tab_icon" src="img/tab3.png"/>
                <div class="tab_text">兑换清单</div>
            </div>
            <div class="left tab_icon_out tab4">
                <img class="tab_icon" src="img/tab4.png"/>
                <div class="tab_text">个人中心</div>
            </div>
        </div>
    </div>
    <div class="content_container" style="height: 100%; overflow: scroll;">
        <div class="swiper-container" style="height:auto; width:1080px; display: block; margin-top: 334px;">
            <div class="swiper-wrapper">
                <!--轮播图-->
            </div>
            <div class="swiper-pagination"></div>
        </div>
        <div id="content1-div">
            <div class="title shadow">商品列表</div>
            <div class="content" id="content1"></div>
        </div>
        <div style="height: 80px;"></div>
    </div>

</div>

<!--包含切换银行js-->
<script src="js/changebank.js"></script>

</body>
<script type="text/javascript">

init();
    function init() {
        initBtn();
        initData();
    }
initBanner();
    function initBanner(){
            $(".swiper-container").css("height", "540px");
            var html = "";
            for (var i=0; i<3; i++) {
                html += '<img class="swiper-slide" src="http://www.pptbz.com/pptpic/UploadFiles_6909/201204/2012041411433867.jpg" onclick="jumpToDetail()"/>';
            }
            $(".swiper-wrapper").html(html);
            $(".swiper-container").show();
            var swiper = new Swiper('.swiper-container', {
                pagination: '.swiper-pagination',
                paginationClickable: true,
                autoplayDisableOnInteraction: false,
                loop: false,
                autoplay: 3*1000
            });


    }
    function initBtn() {
        $(".tab1").click(function() {
            jump("javascript:;");
        });
        $(".tab2").click(function() {
            jump("exchangelist.html");
        });
        $(".tab3").click(function() {
            jump("alexchange.html");
        });
        $(".tab4").click(function() {
            jump("user_center.html");
        });
    }
    function scrollToPosition(a) {
        if(a < 0){
            a = 0;
        }
        $('body').animate({scrollTop: a}, 300);
    }
    function initData() {
        var html = "";
        for (var j=0; j<5; j++) {
            html += '<div class="content1 shadow" onclick="jumpToDetail()"><img class="content1_img" src="http://www.pptbz.com/pptpic/UploadFiles_6909/201110/20111014111307895.jpg" /><div class="content1_text left"><div class="content1_text_top">商品名称</div><div class="content1_text_bottom">不可兑换</div></div><div class="content1_btn right">查看详情</div><div class="clear"></div></div>';
        };
        $("#content1").html(html);
    }
    function jumpToDetail(spusid,gid,aid){
        jump("detail.html?spusid="+spusid+"&gid="+gid+"&aid="+aid);
    }

    //判断是否达到底部
    $(document).ready(function (){
        var nScrollHight = 0; //滚动距离总长(注意不是滚动条的长度)
        var nScrollTop = 0;   //滚动到的当前位置
        var nDivHight = $(document).height();

        $(".content_container").scroll(function(){
            nScrollHight = $(this)[0].scrollHeight;
            nScrollTop = $(this)[0].scrollTop;
            console.log(nScrollTop)
            if(nScrollTop + nDivHight >= nScrollHight)
                alert("滚动条到底部了");
        });
    });

</script>
</html>